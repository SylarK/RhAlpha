<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>RhAlpha :: Principal</title>
        <link rel="shortcut icon" href="#">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">	
    
    	<style>
    		.img-avatar{    		  
    		  object-fit: cover;
			  border-radius:50%;
			  width: 150px;
			  height: 150px;
    		}
    		
    		.service{
    		 display: flex;
    justify-content: space-between;
    flex-direction: column;
    		}
    	</style>
    </head>
    <body>
    <div id="app">
		<div class="container">
			<div class="row d-flex justify-content-center text-center mt-5 mb-5">
				<div class="col-2"></div>
				<div class="col-4">{{titles[0]}}</div>
				<div class="col-4">{{titles[1]}}</div>
				<div class="col-2"></div>
			</div>
			<div class="row">
				<div class="text-center">
					 <img v-bind:src="users.urlImage" class="img-avatar" alt="Avatar">
				</div>
			</div>
			<div class="row mt-2">
				<div class="col text-center">{{users.nome}}</div>
			</div>
			<div class="row mt-5">
				<div class="col text-center">{{ timestamp }}</div>
			</div>
			<div class="row mt-5">
				<div class="col text-center">Registrar Ponto</div>
				<br>
				<button v-on:click="enviarRegistroPonto()" class="btn btn-primary mt-2">Enviar Registro</button>
			</div>
			<!-- Tabela 
				<div class="row justify-content-md-center mt-5">
				<div class="">Imagem</div>
			</div> -->
		</div>    
    </div>
	
	<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script>

		let data = {
					titles:['Principal', 'RelatÃ³rios'],
					users:{nome: 'Bruce Banner', urlImage: 'https://images.unsplash.com/photo-1590586914586-9df5c6dfc39d?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=727&q=80'},
					timestamp: "",
					todayIs: ""
				}
	
		new Vue({
				el: "#app",
				data: data,
				created(){
						const today = new Date();	
						const date = today.getDate()+'/'+(today.getMonth()+1)+'/'+today.getFullYear();
						this.todayIs = date;					
						setInterval(this.getNow, 1000);
					},
				mouted(){
					console.log("Component is mounted")
					},
				methods:{
					getNow: function(){
							const today = new Date();
		                    const time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
		                    this.timestamp = time;
		                    //const date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
		                    //const dateTime = date +' '+ time;		                    
						},
					enviarRegistroPonto: function(){
						axios.post('http://localhost:8080/api/ponto/registrar', {
								horaRegistro: this.timestamp,
								dataRegistro: this.todayIs,
								nomeUsuario: ""
							})
							.then(response => console.log(response))
							.catch	(error => {
									console.log(error)
								})	
						}
					}	
			})

		
	</script>
	
</body>
</html>